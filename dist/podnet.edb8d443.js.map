{"version":3,"sources":["views/podnet.vue"],"names":[],"mappings":"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","file":"podnet.edb8d443.js","sourceRoot":"../src","sourcesContent":["<template>\n    <div class=\"govuk-width-container\">\n        <main class=\"govuk-main-wrapper\">\n            <div class=\"govuk-grid-column-full\">\n                <h2 class=\"govuk-heading-l\">Máte nápad ako zlepšiť elektronické služby ?</h2>\n                <p>Poďme do toho spolu a ukážme, kde je priestor na zlepšenie.</p>\n            </div>\n            <div class=\"govuk-grid-column-two-thirds\">\n                <form action=\"/\" method=\"post\" id=\"submit-form\">\n                    <fieldset class=\"govuk-fieldset\">\n                        <div class=\"govuk-form-group\">\n                            <label\n                                class=\"govuk-label\"\n                                for=\"govuk-input-summary\"\n                            >Akú situáciu riešite? Krátky popis.</label>\n                            <input\n                                class=\"govuk-input\"\n                                id=\"govuk-input-summary\"\n                                name=\"govuk-input-summary\"\n                                type=\"text\"\n                                v-model=\"form.summary\"\n                            />\n                        </div>\n\n                        <div class=\"govuk-form-group\">\n                            <label class=\"govuk-label\" for=\"govuk-textarea-description\">Text podnetu</label>\n                            <textarea\n                                class=\"govuk-textarea\"\n                                id=\"govuk-textarea-description\"\n                                name=\"govuk-textarea-description\"\n                                rows=\"5\"\n                                v-model=\"form.description\"\n                            ></textarea>\n                        </div>\n\n                        <div class=\"govuk-form-group\">\n                            <label class=\"govuk-label\" for=\"select-category\">\n                                Kategória\n                                <em>(nepovinné)</em>\n                            </label>\n                            <nd-select\n                                v-model=\"form.categories.persona\"\n                                :options=\"categories.persona\"\n                            ></nd-select>\n                            <nd-select v-model=\"form.categories.field\" :options=\"subCategories\"></nd-select>\n                        </div>\n\n                        <div class=\"govuk-form-group\">\n                            <label class=\"govuk-label\" for=\"file-upload\">\n                                Príloha\n                                <em>(nepovinné)</em>\n                            </label>\n                            <input\n                                class=\"govuk-file-upload\"\n                                id=\"file-upload\"\n                                name=\"file-upload\"\n                                type=\"file\"\n                                ref=\"files\"\n                                multiple\n                                @change=\"fileUpload\"\n                            />\n                        </div>\n\n                        <div class=\"govuk-form-group\">\n                            <label class=\"govuk-label\" for=\"govuk-input-name\">Meno</label>\n                            <input\n                                class=\"govuk-input govuk-!-width-two-thirds\"\n                                id=\"govuk-input-name\"\n                                name=\"govuk-input-name\"\n                                type=\"text\"\n                                v-model=\"form.name\"\n                            />\n                        </div>\n\n                        <div class=\"govuk-form-group\">\n                            <label class=\"govuk-label\" for=\"govuk-input-email\">E-mail</label>\n                            <input\n                                class=\"govuk-input govuk-!-width-two-thirds\"\n                                id=\"govuk-input-email\"\n                                name=\"govuk-input-email\"\n                                type=\"text\"\n                                v-model=\"form.email\"\n                            />\n                        </div>\n\n                        <button class=\"govuk-button\" @click.prevent=\"submitForm\">Vytvoriť</button>\n                    </fieldset>\n                </form>\n            </div>\n        </main>\n    </div>\n</template>\n\n<script>\nexport default {\n    data() {\n        return {\n            token: \"tokenlolo\",\n            form: {\n                categories: {\n                    persona: null,\n                    field: null\n                },\n                summary: \"\",\n                description: \"\",\n                files: null,\n                name: \"\",\n                email: \"\"\n            },\n            categories: {\n                persona: [\n                    {\n                        text: \"Žiadne\",\n                        value: null\n                    },\n                    {\n                        text: \"Občan\",\n                        value: 10203,\n                        options: [\n                            {\n                                text: \"Žiadne\",\n                                value: null\n                            },\n                            {\n                                text: \"Bývanie\",\n                                value: 10206\n                            },\n                            {\n                                text: \"Financie\",\n                                value: 10207\n                            },\n                            {\n                                text: \"Zamestnanie\",\n                                value: 10208\n                            },\n                            {\n                                text: \"Obrana a Bezpečnosť\",\n                                value: 10209\n                            },\n                            {\n                                text: \"Cestovanie\",\n                                value: 10210\n                            },\n                            {\n                                text: \"Kultúra\",\n                                value: 10211\n                            },\n                            {\n                                text: \"Rodina a Vzťahy\",\n                                value: 10212\n                            },\n                            {\n                                text: \"Zdravie\",\n                                value: 10213\n                            },\n                            {\n                                text: \"Doprava\",\n                                value: 10214\n                            },\n                            {\n                                text: \"Občan a štát\",\n                                value: 10215\n                            },\n                            {\n                                text: \"Vzdelanie a šport\",\n                                value: 10216\n                            },\n                            {\n                                text: \"Životné prostredie\",\n                                value: 10217\n                            }\n                        ]\n                    },\n                    {\n                        text: \"Podnikateľ\",\n                        value: 10204,\n                        options: [\n                            {\n                                text: \"Žiadne\",\n                                value: null\n                            },\n                            {\n                                text: \"Administratívny a ekonomický chod\",\n                                value: 10218\n                            },\n                            {\n                                text: \"Zodpovedné podnikanie\",\n                                value: 10220\n                            },\n                            {\n                                text: \"Duševné vlastníctvo\",\n                                value: 10221\n                            },\n                            {\n                                text: \"Ukončenie podnikania\",\n                                value: 10222\n                            },\n                            {\n                                text: \"Podnikanie\",\n                                value: 10223\n                            },\n                            {\n                                text: \"Začatie podnikania\",\n                                value: 10224\n                            }\n                        ]\n                    },\n                    {\n                        text: \"Úradník\",\n                        value: 10205,\n                        options: [\n                            {\n                                text: \"Žiadne\",\n                                value: null\n                            }\n                        ]\n                    }\n                ]\n            }\n        };\n    },\n    computed: {\n        subCategories: function() {\n            let options = [\n                {\n                    text: \"Žiadne\",\n                    value: null\n                }\n            ];\n            let persona = this.form.categories.persona;\n            if (persona) {\n                let index = this.categories.persona.findIndex(\n                    category => category.value == persona\n                );\n                options = this.categories.persona[index].options;\n            }\n            return options;\n        }\n    },\n    methods: {\n        //TODO: Fileupload component\n        fileUpload: function(event) {\n            let uploadedFiles = this.$refs.files.files;\n            if (this.form.files === null) {\n                this.form.files = [];\n            }\n            for (var i = 0; i < uploadedFiles.length; i++) {\n                this.form.files.push(uploadedFiles[i]);\n            }\n        },\n        postData: async function(inputData) {\n            const postURL = \"https://lepsiesluzby.sk/jira/rest/api/2/issue\";\n\n            const config = {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Accept: \"application/json\",\n                    \"recaptcha-token\": this.token\n                }\n            };\n            try {\n                const post = await this.axios.post(postURL, inputData, config);\n                // TODO: Add files support here\n                this.$router.push(\"success\");\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        submitForm: function() {\n            // TODO: Add validation, change customfields to be more general?\n            let data = this.form;\n            let cfStr = \"customfield_\";\n\n            let categoryStr = cfStr + data.categories.persona;\n            const output = {\n                fields: {\n                    project: {\n                        key: \"SDM\"\n                    },\n                    issuetype: {\n                        name: \"Bug\"\n                    },\n                    summary: data.summary,\n                    description: data.description,\n                    components: [\n                        {\n                            name: \"e-services\"\n                        }\n                    ],\n                    customfield_10200: data.email,\n                    customfield_10116: data.name\n                }\n            };\n            if (data.categories.persona) {\n                output.fields[categoryStr] = {\n                    value: data.categories.persona,\n                    child: {\n                        value: data.categories.field\n                    }\n                };\n            }\n            this.postData(output);\n        },\n        getToken: function(loaded) {\n            if (loaded) {\n                this.$recaptcha(\"login\").then(token => {\n                    this.token = token;\n                });\n            }\n        }\n    },\n    mounted() {\n        let loaded = false;\n        this.$recaptchaLoaded().then(() => {\n            loaded = true;\n            this.getToken(loaded);\n        });\n    }\n};\n</script>\n\n<style>\n</style>\n"]}